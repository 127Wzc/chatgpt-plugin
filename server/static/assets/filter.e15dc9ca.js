import{p as j,o as k,O as L,aP as K,b6 as w,ay as I,bi as S}from"./index.69b87e29.js";const x=(t,r,e)=>t==null||r==null?-1:t.toString().toLocaleLowerCase().indexOf(r.toString().toLocaleLowerCase()),C=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function P(t,r,e){var F,g,u;const c=[],d=(F=e==null?void 0:e.default)!=null?F:x,m=e!=null&&e.filterKeys?I(e.filterKeys):!1,f=Object.keys((g=e==null?void 0:e.customKeyFilter)!=null?g:{}).length;if(!(t!=null&&t.length))return c;e:for(let n=0;n<t.length;n++){const a=t[n],h={},s={};let l=-1;if(r&&!(e!=null&&e.noFilter)){if(typeof a=="object"){const O=m||Object.keys(a);for(const i of O){const b=S(a,i,a),v=(u=e==null?void 0:e.customKeyFilter)==null?void 0:u[i];if(l=v?v(b,r,a):d(b,r,a),l!==-1&&l!==!1)v?h[i]=l:s[i]=l;else if((e==null?void 0:e.filterMode)==="every")continue e}}else l=d(a,r,a),l!==-1&&l!==!1&&(s.title=l);const y=Object.keys(s).length,M=Object.keys(h).length;if(!y&&!M||(e==null?void 0:e.filterMode)==="union"&&M!==f&&!y||(e==null?void 0:e.filterMode)==="intersection"&&(M!==f||!y))continue}c.push({index:n,matches:{...s,...h}})}return c}function E(t,r,e,c){const d=k(()=>typeof(e==null?void 0:e.value)!="string"&&typeof(e==null?void 0:e.value)!="number"?"":String(e.value)),m=L([]),f=L(new Map),F=k(()=>c!=null&&c.transform?K(r).map(c==null?void 0:c.transform):K(r));w(()=>{m.value=[],f.value=new Map;const u=P(F.value,d.value,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),n=K(r);u.forEach(a=>{let{index:h,matches:s}=a;const l=n[h];m.value.push(l),f.value.set(l.value,s)})});function g(u){return f.value.get(u.value)}return{filteredItems:m,filteredMatches:f,getMatches:g}}export{C as m,E as u};

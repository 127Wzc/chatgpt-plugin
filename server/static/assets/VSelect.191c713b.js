import{p as U,I as ae,al as le,am as ne,ag as te,an as oe,ao as ue,ap as se,n as ie,C as ce,O as S,u as A,o as V,aq as re,ar as de,as as ve,ad as fe,$ as E,D as u,a2 as T,at as me,J as D,au as pe,av as M,F as N,aw as he,G as ye,a4 as Ve,ax as Ce,ay as ge}from"./index.69b87e29.js";import{V as ke}from"./VCheckboxBtn.eae578de.js";const we=U({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ae,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:le},...ne({itemChildren:!1})},"Select"),Pe=U({...we(),...te(oe({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ue({transition:{component:se}})},"VSelect"),be=ie()({name:"VSelect",props:Pe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,$){let{slots:l}=$;const{t:H}=ce(),C=S(),B=S(),x=A(e,"menu"),r=V({get:()=>x.value,set:a=>{var t;x.value&&!a&&((t=B.value)==null?void 0:t.\u03A8openChildren)||(x.value=a)}}),{items:h,transformIn:j,transformOut:q}=re(e),s=A(e,"modelValue",[],a=>j(ge(a)),a=>{var i;const t=q(a);return e.multiple?t:(i=t[0])!=null?i:null}),m=de(),g=V(()=>s.value.map(a=>h.value.find(t=>e.valueComparator(t.value,a.value))||a)),F=V(()=>g.value.map(a=>a.props.value)),p=ve(!1);let b="",O;const I=V(()=>e.hideSelected?h.value.filter(a=>!g.value.some(t=>t===a)):h.value),R=V(()=>e.hideNoData&&!h.value.length||e.readonly||(m==null?void 0:m.isReadonly.value)),k=S();function z(a){e.openOnClear&&(r.value=!0)}function G(){R.value||(r.value=!r.value)}function J(a){var n,c;if(e.readonly||(m==null?void 0:m.isReadonly.value))return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(r.value=!0),["Escape","Tab"].includes(a.key)&&(r.value=!1),a.key==="Home"?(n=k.value)==null||n.focus("first"):a.key==="End"&&((c=k.value)==null||c.focus("last"));const t=1e3;function i(o){const f=o.key.length===1,d=!o.ctrlKey&&!o.metaKey&&!o.altKey;return f&&d}if(e.multiple||!i(a))return;const w=performance.now();w-O>t&&(b=""),b+=a.key.toLowerCase(),O=w;const P=h.value.find(o=>o.title.toLowerCase().startsWith(b));P!==void 0&&(s.value=[P])}function W(a){var t;a.key==="Tab"&&((t=C.value)==null||t.focus())}function L(a){if(e.multiple){const t=F.value.findIndex(i=>e.valueComparator(i,a.value));if(t===-1)s.value=[...s.value,a];else{const i=[...s.value];i.splice(t,1),s.value=i}}else s.value=[a],r.value=!1}function Y(a){var t;(t=k.value)!=null&&t.$el.contains(a.relatedTarget)||(r.value=!1)}function Q(){var a;p.value&&((a=C.value)==null||a.focus())}function X(a){p.value=!0}return fe(()=>{const a=!!(e.chips||l.chip),t=!!(!e.hideNoData||I.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),i=s.value.length>0,[w]=E.filterProps(e),P=i||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return u(E,D({ref:C},w,{modelValue:s.value.map(n=>n.props.value).join(", "),"onUpdate:modelValue":n=>{n==null&&(s.value=[])},focused:p.value,"onUpdate:focused":n=>p.value=n,validationValue:s.externalValue,dirty:i,class:["v-select",{"v-select--active-menu":r.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,readonly:!0,placeholder:P,"onClick:clear":z,"onMousedown:control":G,onBlur:Y,onKeydown:J}),{...l,default:()=>u(T,null,[u(me,D({ref:B,modelValue:r.value,"onUpdate:modelValue":n=>r.value=n,activator:"parent",contentClass:"v-select__content",disabled:R.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Q},e.menuProps),{default:()=>[t&&u(pe,{ref:k,selected:F.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:W,onFocusin:X,tabindex:"-1"},{default:()=>{var n,c,o,f;return[(n=l["prepend-item"])==null?void 0:n.call(l),!I.value.length&&!e.hideNoData&&((o=(c=l["no-data"])==null?void 0:c.call(l))!=null?o:u(M,{title:H(e.noDataText)},null)),I.value.map((d,y)=>{var K,_;const v=D(d.props,{key:y,onClick:()=>L(d)});return(_=(K=l.item)==null?void 0:K.call(l,{item:d,index:y,props:v}))!=null?_:u(M,v,{prepend:Z=>{let{isSelected:ee}=Z;return u(T,null,[e.multiple&&!e.hideSelected?u(ke,{key:d.value,modelValue:ee,ripple:!1,tabindex:"-1"},null):void 0,d.props.prependIcon&&u(N,{icon:d.props.prependIcon},null)])}})}),(f=l["append-item"])==null?void 0:f.call(l)]}})]}),g.value.map((n,c)=>{var d,y;function o(v){v.stopPropagation(),v.preventDefault(),L(n)}const f={"onClick:close":o,onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:n.value,class:"v-select__selection"},[a?l.chip?u(ye,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var v;return[(v=l.chip)==null?void 0:v.call(l,{item:n,index:c,props:f})]}}):u(he,D({key:"chip",closable:e.closableChips,size:"small",text:n.title},f),null):(y=(d=l.selection)==null?void 0:d.call(l,{item:n,index:c}))!=null?y:u("span",{class:"v-select__selection-text"},[n.title,e.multiple&&c<g.value.length-1&&u("span",{class:"v-select__selection-comma"},[Ve(",")])])])})]),"append-inner":function(){var f;for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return u(T,null,[(f=l["append-inner"])==null?void 0:f.call(l,...c),e.menuIcon?u(N,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ce({isFocused:p,menu:r,select:L},C)}});export{be as V,we as m};
